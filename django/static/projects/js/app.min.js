function loadPage(e){return fetch(e,{method:"GET"}).then(function(e){return e.text()})}function setCookie(e,t,n){var a=new Date;a.setTime(a.getTime()+n);var o="expires="+a.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}function cookieExists(e){return""!==getCookie(e)}function initPageTransitions(){document.addEventListener("click",function(e){for(var t=e.target;t&&!t.href;)t=t.parentNode;if(t){if(!t.href.includes("beatonma.org")&&!t.href.includes("beatonma.com"))return;for(var n=0;n<noAnimationPages.length;n++){var a=noAnimationPages[n];if(t.href.includes(a))return}return e.preventDefault(),history.pushState(null,null,t.href),void changePage()}}),window.addEventListener("popstate",changePage)}function changePage(e){var t=window.location.href;arguments.length>0&&"string"==typeof e&&e.includes("url=")&&(t=e.replace(/url=/g,"")),loadPage(t).then(function(e){var n=document.createElement("div");n.innerHTML=e,document.title=$(n).find("title").text();var a=document.querySelector("#content"),o=n.querySelector("#content");try{animatePageChange(a,o)}catch(e){console.log("Page transition animation error - opening normally."),window.location.href=t}})}function animatePageChange(oldContent,newContent){var container=document.querySelector("#content_wrapper"),fadeOut=oldContent.animate([{opacity:1},{opacity:0}],pageAnimationDuration);fadeOut.onfinish=function(){oldContent.parentNode.removeChild(oldContent),container.appendChild(newContent);var fadeIn=newContent.animate([{opacity:0},{opacity:1}],pageAnimationDuration);animateCardsIn(newContent);var onPageChange=newContent.querySelector("#onPageChange").innerHTML;eval(onPageChange)}}function animateCardsOut(e){var t=0,n=$(e).find(".card_container");$(n).children(".card").each(function(){elementOut(this,t),t+=itemAnimationDelay})}function animateCardsIn(e){var t=0,n=$(e).find(".card_container");$(n).children(".card").each(function(){elementIn(this,t),t+=itemAnimationDelay})}function elementIn(e,t){e.animate([{opacity:0},{opacity:0}],{delay:0,duration:t}),e.animate([{opacity:0},{opacity:1}],{delay:t,duration:itemAnimationDuration,easing:enterInterpolator}),e.animate([{transform:"translateY(50px)"},{transform:"translateY(0px)"}],{delay:t,duration:itemAnimationDuration,easing:enterInterpolator})}function elementOut(e,t){e.animate([{opacity:1},{opacity:0}],{delay:t,duration:itemAnimationDuration,easing:exitInterpolator}),e.animate([{transform:"translateY(0px)"},{transform:"translateY(50px)"}],{delay:t,duration:itemAnimationDuration,easing:exitInterpolator})}function replaceBannerImage(e){""===e&&(e="images/play_banner.png"),console.log("loading banner: "+e);var t=document.querySelector("#banner_image"),n=t.animate([{opacity:1},{opacity:0}],itemAnimationDuration);n.onfinish=function(){$(t).css("background","url('"+e+"') center / cover"),t.animate([{opacity:0},{opacity:1}],itemAnimationDuration)}}function init(){initPageTransitions()}function setDayNightAutoTheme(){if(cookieExists("theme")){var e=getCookie("theme");return console.log("Setting theme from cookie: "+e),void setTheme(e,!0)}$("#theme_icon").html("");var t=(new Date).getHours();t>8&&t<20?(theme="day",setTheme(theme)):(theme="night",setTheme(theme))}function setTheme(e,t){console.log("theme:"+e);var n=document.getElementById("theme");"day"==e?(n.setAttribute("href","/static/projects/css/colors-day.css"),$("meta[name=theme-color]").attr("content","#311B92"),$("#main_header").css("background","#311B92"),arguments.length>1&&$("#theme_icon").html('<i class="material-icons">brightness_7</i>'),theme=e):"night"==e?(n.setAttribute("href","/static/projects/css/colors-night.css"),$("meta[name=theme-color]").attr("content","#333333"),$("#main_header").css("background","#333333"),arguments.length>1&&$("#theme_icon").html('<i class="material-icons">brightness_2</i>'),theme=e):""==e?(""==theme&&(theme="day"),setTheme(theme)):"day"==theme&&""!=e&&($("meta[name=theme-color]").attr("content",e),$("#main_header").css("background",e))}function toggleTheme(){theme="day"==theme?"night":"day",setCookie("theme",theme,108e5),setTheme(theme,!0)}var itemAnimationDuration=200,itemAnimationDelay=60,enterInterpolator="ease",exitInterpolator="ease-in",pageAnimationDuration=200,noAnimationPages=["beatonma.org/contact/"],theme="day";setDayNightAutoTheme();