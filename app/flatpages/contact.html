<div class="card_container">
    <div class="card">
        <div class="card_title_large card_title_area">Contact me</div>
        <div class="card_content">
            <div class="text-primary card_p">
                Need help with a project? Experiencing problems with one of my apps? Any other questions, suggestions or enquiries?
            </div>
            <div class="text-primary card_p">
                Please fill out the form below and I will get back to you as quickly as possible!
            </div>
            <div class="card_p"></div>

            <form id="contact_form" name="contact_form" method="post" action="/script/sendmail">
                <div class="card_p">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="width:100%;">
                        <input class="mdl-textfield__input textfield" type="text" name="name" required autofocus>
                        <label class="mdl-textfield__label label" for="name">Your name</label>
                    </div>
                </div>

                <div class="card_p">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="width:100%;">
                        <input class="mdl-textfield__input textfield" type="text" name="contact_method" required autofocus>
                        <label class="mdl-textfield__label label" for="contact_method">How can I contact you? (e.g. email address, IM screen-name &amp; service)</label>
                    </div>
                </div>

                <div class="card_p">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" style="width:100%;">
                        <textarea class="mdl-textfield__input textfield" type="text" rows= "5" cols="100" name="message" required></textarea>
                        <label class="mdl-textfield__label label" for="message">What would you like to say?</label>
                    </div>
                </div>

                <div style="text-align:right;">
                    <div style="width:72px;height:36px;display:inline-block;text-align:left;">
                        <div style="position:absolute;">
                            <button id="sendbutton" style="position:absolute;" type="submit" class="mdl-button mdl-js-button mdl-button--accent">
                                Send
                            </button>
                        </div>
                        <div id="spinner" style="display:none;position:absolute;margin:2px 0 0 18px">
                            <div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div>
                        </div>
                        <div id="complete" style="display:none;position:absolute;margin:4px 0 0 22px;">
                            <i class="material-icons accent">done</i>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript">
//    function setupFormHandler() {
//        var frm = $('#contact_form');
//        frm.submit(function(ev) {
//            var sendbutton = document.getElementById('sendbutton');
//            var spinner = document.getElementById('spinner');
//            var tick = document.getElementById('complete');
//
//            sendbutton.style.display = 'none';
//            spinner.style.display = 'block';
//
//            $.ajax({
//                type: frm.attr('method'),
//                url: frm.attr('action'),
//                data: frm.serialize(),
//                success: function(data) {
//                    spinner.style.display = 'none';
//                    tick.style.display = 'block';
//                    setTimeout(function() {
//                        changePage("url=/contact_success/");
//                    }, 300);
//                }
//            });
//            ev.preventDefault();
//        });
//    }
//    
//    $(document).ready(setupFormHandler());
    
//    $(document).ready(function() {
//        var frm = $('#contact_form');
//        frm.submit(function(ev) {
//            var sendbutton = document.getElementById('sendbutton');
//            var spinner = document.getElementById('spinner');
//            var tick = document.getElementById('complete');
//
//            sendbutton.style.display = 'none';
//            spinner.style.display = 'block';
//
//            $.ajax({
//                type: frm.attr('method'),
//                url: frm.attr('action'),
//                data: frm.serialize(),
//                success: function(data) {
//                    spinner.style.display = 'none';
//                    tick.style.display = 'block';
//                    setTimeout(function() {
//                        changePage("url=/contact_success/");
//                    }, 300);
//                }
//            });
//            ev.preventDefault();
//        });
//    });
</script>

<script id="onPageChange" type="text/javascript">
    function setupFormHandler() {
        var frm = $('#contact_form');
        frm.submit(function(ev) {
            var sendbutton = document.getElementById('sendbutton');
            var spinner = document.getElementById('spinner');
            var tick = document.getElementById('complete');

            sendbutton.style.display = 'none';
            spinner.style.display = 'block';

            $.ajax({
                type: frm.attr('method'),
                url: frm.attr('action'),
                data: frm.serialize(),
                success: function(data) {
                    spinner.style.display = 'none';
                    tick.style.display = 'block';
                    setTimeout(function() {
                        changePage("url=/contact_success/");
                    }, 300);
                }
            });
            ev.preventDefault();
        });
    }
    
//    $(document).ready(setupFormHandler());
    
    setDayNightAutoTheme();
    setupFormHandler();
</script>